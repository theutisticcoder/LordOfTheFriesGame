<!DOCTYPE html>
<html>

<head>
    <title>Lord Of The Fries</title>
    <style>
        body {
            margin: 0;
            overflow: hidden;
        }

        canvas {
            display: block;
        }
    </style>
</head>

<body>
    <div id="container"></div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/loaders/GLTFLoader.js"></script>
    <script type="module">
        let scene, camera, renderer, model, controls, modelbox;
        import { OrbitControls } from 'https://cdn.jsdelivr.net/npm/three@0.124/examples/jsm/controls/OrbitControls.js';

        function init() {
            scene = new THREE.Scene();
            camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
            renderer = new THREE.WebGLRenderer({ antialias: true });
            renderer.setSize(window.innerWidth, window.innerHeight);
            document.getElementById('container').appendChild(renderer.domElement);

            // Add lights
            const ambientLight = new THREE.AmbientLight(0xffffff, 0.5);
            scene.add(ambientLight);
            const directionalLight = new THREE.DirectionalLight(0xffffff, 0.8);
            directionalLight.position.set(0, 1, 1);
            scene.add(directionalLight);

            // Load GLB model
            const loader = new THREE.GLTFLoader();
            loader.load('abandoned_mcdonalds.glb', (gltf) => {
                model = gltf.scene;
                model.scale.set(10, 10, 10);
                model.position.set(0, 0, 2)
                scene.add(model);
            }, undefined, (error) => {
                console.error('Error loading GLB model:', error);
            });

            controls = new OrbitControls(camera, renderer.domElement);
            controls.keys = {
                LEFT: 'ArrowLeft', //left arrow
                UP: 'ArrowUp', // up arrow
                RIGHT: 'ArrowRight', // right arrow
                BOTTOM: 'ArrowDown' // down arrow
            }
            modelbox = new THREE.Box3().setFromObject(model);

            // Optional: Orbit controls
            // const controls = new THREE.OrbitControls(camera, renderer.domElement);
            controls.update();

            animate();
        }

        function animate() {
            requestAnimationFrame(animate);
            // Update model animations or custom logic here
            controls.update();

            renderer.render(scene, camera);
        }

        function onWindowResize() {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        }

        window.addEventListener('resize', onWindowResize);
        document.addEventListener('keydown', function (event) {
            switch (event.keyCode) {
                case 87: // W
                    camera.position.z += 0.1;
                     if (modelbox.containsPoint(camera.position)) {
                        camera.position.z -= 0.1;
                        return;
                    }
                    break;
                case 65: // A
                    camera.position.x += 0.1;
                     if (modelbox.containsPoint(camera.position)) {
                        camera.position.x -= 0.1;
                        return;
                    }
                    break;
                case 83: // S
                    camera.position.z -= 0.1;
                    if (modelbox.containsPoint(camera.position)) {
                        camera.position.z += 0.1;
                        return;
                    }
                    break;
                case 68: // D

                    camera.position.x -= 0.1;
                    if (modelbox.containsPoint(camera.position)) {
                        camera.position.x += 0.1;
                        return;
                    }
                    break;
            }
        });
        init();

    </script> <!-- Your custom JavaScript -->
</body>

</html>